<ion-view>
    <ion-content scroll="false" overflow-y="hidden" class="main-content" style="margin-left: 10px;">
        <div class="pageview" style="background:#ffffff !important;">

            <div class="row">
                <div class="col-md-12">
                    <div class="ContainerView">

                        <div class="CreateOrderView">

                            <div class="row PortalView">
                                <div class="panel fullwithwithoutpadding">


                                    <div class="panel-content fullwithwithoutpadding">




                                        <div class="list" style="float:left;width:100%;border:1px solid #d5d5d5;margin-bottom:0px">
                                            <div class="col-lg-12" ng-if="false">
                                                <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                    <div class="columnfulldata  margintopdata">
                                                        <div class="labelname" style="width: auto !important;">
                                                            {{resData.res_GridColumn_OrderNumber}} :
                                                        </div>
                                                        <div class="labelcontrol" style="margin-top: 6px;">
                                                            {{labelOrderNumber}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <button type="button" class="btn  btn-square col-lg-12 btn-success" style="margin-bottom: 0px;" ng-click="setoverall()">{{resData.res_GridColumn_OrderNumber}} : {{labelOrderNumber}}</button>
                                            </div>
                                            <div class="col-lg-12">
                                                <div class="col-lg-12">
                                                    <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                        <div class="columnfulldata  margintopdata">
                                                            <div class="labelname">
                                                                {{resData.res_OrderFeedback_FeedbackType}}<span style="color:red;">*</span> :
                                                            </div>
                                                            <div class="labelcontrol">

                                                                <select class="form-control" style="margin:0px !important" ng-disabled="IsFeedbackDetailPage"
                                                                        ng-model="FeedbackVariable.Name" ng-change="GetValueByParentid(FeedbackVariable.Name)"
                                                                        ng-options="obj.LookUpId as obj.Name for obj in bindOverAllFeedbak">
                                                                    <option value="">Select</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="col-lg-12">
                                                    <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                        <div class="columnfulldata  margintopdata">
                                                            <div class="labelname">
                                                                {{resData.res_OrderFeedback_Feedback}} <span ng-if="bindallFeedbak.length >0" style="color:red;">*</span> :
                                                            </div>
                                                            <div class="labelcontrol">
                                                                <select class="form-control" style="margin:0px !important" ng-disabled="IsFeedbackDetailPage"
                                                                        ng-model="FeedbackVariable.ItemFeedbackName" ng-change="GetSelectedValue(FeedbackVariable.ItemFeedbackName)"
                                                                        ng-options="obj.LookUpId as obj.Name for obj in bindallFeedbak">
                                                                    <option value="">Select</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-12">
                                                    <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                        <div class="columnfulldata  margintopdata">
                                                            <div class="labelname">
                                                                {{resData.res_OrderFeedback_Attachment}} {{resData.res_OrderFeedback_FileAllowed}} :
                                                            </div>
                                                            <div class="labelcontrol">
                                                                <div class="fileinput fileinput-new input-group" data-provides="fileinput">
                                                                    <div class="form-control" data-trigger="fileinput">
                                                                        <i class="glyphicon glyphicon-file fileinput-exists"></i>
                                                                        <span class="fileinput-filename">{{FeedbackVariable.labelFilename}}</span>
                                                                    </div>
                                                                    <span class="input-group-addon btn btn-default btn-file">
                                                                        <span class="fileinput-new">Choose...</span>
                                                                        <span class="fileinput-exists">Change</span>
                                                                        <input type="file" id="fileUpload" onchange="angular.element(this).scope().FileNameChanged(this)" file-model="fileupload.File" />
                                                                    </span>
                                                                    <a href="#" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>



                                                <div class="col-lg-12">
                                                    <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                        <div class="columnfulldata  margintopdata">
                                                            <div class="labelname">
                                                                {{resData.res_ControlTower_DocumentSize}} :
                                                            </div>
                                                            <div class="labelcontrol">
                                                                10 {{resData.res_ControlTower_DocumentSizeType}}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-12">
                                                    <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                        <div class="columnfulldata  margintopdata">
                                                            <div class="labelname">
                                                                {{resData.res_OrderFeedback_Comment}}<span style="color:red;">*</span> :
                                                            </div>
                                                            <div class="labelcontrol">
                                                                <textarea id="inputRFMQty" class="form-control form-white" ng-model="FeedbackVariable.Comment" type="text" rows="4" cols="50" placeholder="Comment"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-12" ng-show="ReturnQuantityFieldDistabled">
                                                    <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                        <div class="columnfulldata  margintopdata">
                                                            <div class="labelname">
                                                                {{resData.res_OrderFeedback_ActualReceiveDate}} :
                                                            </div>
                                                            <div class="labelcontrol">
                                                                <div class="prepend-icon">
                                                                    <input type="text" name="datepicker" onkeypress="return false;" ng-model="FeedbackVariable.ReceiveDate" class="customdate-picker form-control" placeholder="Select a Request date...">
                                                                    <i class="icon-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>



                                            <div class="specificitem" style="float:left;width:100%" ng-if="IsFeedBackForItem">
                                                <div class="col-lg-12" style="margin-top:1%;" ng-if="IsFeedbackDetailPage === false">
                                                    <button type="button" class="btn btn-square col-lg-12  specificItemList">{{resData.res_OrderFeedback_SpecificItem}}</button>
                                                </div>
                                                <div class="col-lg-12" ng-if="IsFeedbackDetailPage === false">
                                                    <div class="col-lg-12">
                                                        <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                            <div class="columnfulldata  margintopdata">
                                                                <div class="labelname">
                                                                    {{resData.res_OrderFeedback_Item}} :
                                                                </div>
                                                                <div class="labelcontrol">
                                                                    <select class="form-control" style="margin:0px !important"
                                                                            ng-model="FeedbackVariable.ItemName"
                                                                            ng-options="obj.OrderProductId as obj.ItemNameCode for obj in bindallproduct" ng-disabled="ItemSectionForFeedback">
                                                                        <option value="">Select</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12">
                                                        <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;">
                                                            <div class="columnfulldata  margintopdata">
                                                                <div class="labelname">
                                                                    {{resData.res_OrderFeedback_Quantity}} :
                                                                </div>
                                                                <div class="labelcontrol">
                                                                    {{FeedbackVariable.Quantity}} - {{FeedbackVariable.UOM}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-12">
                                                        <div class="col-lg-6" style="margin-bottom: 0px;padding: 0px;margin-top: 10px;">
                                                            <div class="columnfulldata  margintopdata">
                                                                <div class="labelname" style="width: 173px;">
                                                                    {{resData.res_OrderFeedback_ReturnQuantity}}<span style="color:red;">*</span> :
                                                                </div>
                                                                <div class="labelcontrol">

                                                                    <input class="form-control form-white" ng-model="FeedbackVariable.ReturnQuantity" type="number" placeholder="Quantity">

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>




                                                </div>
                                            </div>

                                            <div class="col-lg-12">
                                                <div class="col-lg-12 actionbtnfeedbacksave" style="margin: 30px 0px;">
                                                    <div class="actionbuttoncontrols">
                                                        <div class="actionbtndiv">
                                                            <button class="button btn btn-default" ng-click="ClearFeedbackFields()">{{resData.res_OrderFeedback_Clear}}</button>
                                                        </div>
                                                        <div class="actionbtndiv">
                                                            <button class="button btn btn-success" ng-click="AddMultipleFeedback()">{{resData.res_OrderFeedback_Add}}</button>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-12 feedbackgrid" ng-if="OrderFeedbackListJson.length > 0">
                                                    <table class="table table-striped">
                                                        <thead>
                                                            <tr>

                                                                <th> {{resData.res_OrderFeedback_FeedbackType}} </th>
                                                                <th> {{resData.res_OrderFeedback_Feedback}} </th>
                                                                <th> {{resData.res_OrderFeedback_ProductName}}</th>
                                                                <th> {{resData.res_OrderFeedback_ReturnQuantity}}</th>
                                                                <th> {{resData.res_OrderFeedback_UserName}} </th>
                                                                <th> {{resData.res_OrderFeedback_Comment}} </th>
                                                                <th ng-show="false"> {{resData.res_OrderFeedback_ActualReceiveDate}} </th>
                                                                <th> {{resData.res_OrderFeedback_Attachment}} </th>

                                                                <th> {{resData.res_OrderFeedback_Date}} </th>
                                                                <th style="float: none;"> {{resData.res_OrderFeedback_Delete}} </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody ng-repeat="feedback in OrderFeedbackListJson">
                                                            <tr>

                                                                <td> {{feedback.FeedbackName}} </td>
                                                                <td> {{feedback.Feedback}} </td>
                                                                <td> {{feedback.ProductName}} </td>
                                                                <td> {{feedback.Quantity}} </td>
                                                                <td> {{feedback.Name}} </td>
                                                                <td> {{feedback.Comment}} </td>
                                                                <td ng-if="feedback.ActualReceiveDate === '01/01/1900' || feedback.ActualReceiveDate === ''" ng-show="false">
                                                                    -
                                                                </td>
                                                                <td ng-if="feedback.ActualReceiveDate !== '01/01/1900' && feedback.ActualReceiveDate !== ''" ng-show="false">
                                                                    {{feedback.ActualReceiveDate}}
                                                                </td>
                                                                <td ng-repeat="document in feedback.DocumentsList" ng-if="feedback.DocumentsList != undefined">
                                                                    <a ng-hide="feedback.OrderFeedbackId==0" class="linktext" ng-click="DownloadDocument(document.DocumentsId,feedback.OrderFeedbackId,document.DocumentName,document.DocumentExtension)">{{document.DocumentName}}</a>
                                                                    <a ng-show="feedback.OrderFeedbackId==0" download="{{document.DocumentName}}" href="data:application/octet-stream;base64,{{document.DocumentBase64}}">{{document.DocumentName}}</a>
                                                                </td>
                                                                <td ng-if="feedback.DocumentsList == undefined">
                                                                    -
                                                                </td>
                                                                <td>
                                                                    {{feedback.CreatedDate | date:'dd/MM/yyyy'}}
                                                                </td>
                                                                <td style="text-align:center;font-size:20px;cursor:pointer">
                                                                    <a ng-click="RemoveFeedback(feedback.FeedbackGuId,feedback.OrderFeedbackId)" ng-if="(feedback.OrderFeedbackReplyList.length == 0 || feedback.OrderFeedbackReplyList == undefined) && RoleName==='Customer'"><i class="fa fa-trash"></i></a>
                                                                </td>
                                                            </tr>
                                                            <tr ng-if="feedback.OrderFeedbackReplyList.length > 0">
                                                                <td colspan="7">
                                                                    <table class="table table-striped feedbacktable">
                                                                        <thead>
                                                                            <tr>
                                                                                <th> {{resData.res_OrderFeedback_Reply}}  </th>
                                                                                <th> {{resData.res_OrderFeedback_ReplyBy}} </th>
                                                                                <th style="float:none"> {{resData.res_OrderFeedback_Date}} </th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr ng-repeat="reply in feedback.OrderFeedbackReplyList">
                                                                                <td> {{resData.res_OrderFeedback_Reply}} : {{reply.Comment}} </td>
                                                                                <td> {{reply.Name}} </td>
                                                                                <td>
                                                                                    {{reply.CreatedDate | date:'dd/MM/yyyy'}}
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>




                                        </div>
                                        <div style="float:left;width:100%;margin-top:5px;">
                                            <div class="buttons rightbtn resetbutton">
                                                <button class="button btn btn-success" ng-click="SaveFeedBack()" ng-disabled="IsSaveInProgress">{{resData.res_OrderFeedback_Save}}</button>
                                            </div>
                                            <div class="buttons rightbtn" ng-click="Resetfeedback()">
                                                <button class="button btn btn-default">{{resData.res_OrderFeedback_Reset}}</button>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>


    </ion-content>
</ion-view>
