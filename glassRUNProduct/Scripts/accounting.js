/*
 * accounting.js v0.4.2
 * Copyright 2014 Open Exchange Rates
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://openexchangerates.github.io/accounting.js/
 */
(function(m,p){var i={};i.version="0.4.2";i.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var l=Array.prototype.map,k=Array.isArray,o=Object.prototype.toString;function h(r){return !!(r===""||(r&&r.charCodeAt&&r.substr))}function f(r){return k?k(r):o.call(r)==="[object Array]"}function g(r){return r&&o.call(r)==="[object Object]"}function c(t,r){var s;t=t||{};r=r||{};for(s in r){if(r.hasOwnProperty(s)){if(t[s]==null){t[s]=r[s]}}}return t}function j(v,t,r){var w=[],s,u;if(!v){return w}if(l&&v.map===l){return v.map(t,r)}for(s=0,u=v.length;s<u;s++){w[s]=t.call(r,v[s],s,v)}return w}function b(s,r){s=Math.round(Math.abs(s));return isNaN(s)?r:s}function a(s){var r=i.settings.currency.format;if(typeof s==="function"){s=s()}if(h(s)&&s.match("%v")){return{pos:s,neg:s.replace("-","").replace("%v","-%v"),zero:s}}else{if(!s||!s.pos||!s.pos.match("%v")){return(!h(r))?r:i.settings.currency.format={pos:r,neg:r.replace("%v","-%v"),zero:r}}}return s}var q=i.unformat=i.parse=function(u,r){if(f(u)){return j(u,function(v){return q(v,r)})}u=u||0;if(typeof u==="number"){return u}r=r||i.settings.number.decimal;var s=new RegExp("[^0-9-"+r+"]",["g"]),t=parseFloat((""+u).replace(/\((?=\d+)(.*)\)/,"-$1").replace(s,"").replace(r,"."));return !isNaN(t)?t:0};var n=i.toFixed=function(v,t){t=b(t,i.settings.number.precision);var r=Number(i.unformat(v)+"e"+t);var u=Math.round(r);var s=Number(u+"e-"+t).toFixed(t);return s};var e=i.formatNumber=i.format=function(v,x,y,s){if(f(v)){return j(v,function(A){return e(A,x,y,s)})}v=q(v);var w=c((g(x)?x:{precision:x,thousand:y,decimal:s}),i.settings.number),z=b(w.precision),u=v<0?"-":"",r=parseInt(n(Math.abs(v||0),z),10)+"",t=r.length>3?r.length%3:0;return u+(t?r.substr(0,t)+w.thousand:"")+r.substr(t).replace(/(\d{3})(?=\d)/g,"$1"+w.thousand)+(z?w.decimal+n(Math.abs(v),z).split(".")[1]:"")};var d=i.formatMoney=function(u,x,w,y,r,s){if(f(u)){return j(u,function(A){return d(A,x,w,y,r,s)})}u=q(u);var v=c((g(x)?x:{symbol:x,precision:w,thousand:y,decimal:r,format:s}),i.settings.currency),t=a(v.format),z=u>0?t.pos:u<0?t.neg:t.zero;return z.replace("%s",v.symbol).replace("%v",e(Math.abs(u),b(v.precision),v.thousand,v.decimal))};i.formatColumn=function(v,A,z,B,r,s){if(!v||!f(v)){return[]}var x=c((g(A)?A:{symbol:A,precision:z,thousand:B,decimal:r,format:s}),i.settings.currency),t=a(x.format),y=t.pos.indexOf("%s")<t.pos.indexOf("%v")?true:false,w=0,u=j(v,function(F,D){if(f(F)){return i.formatColumn(F,x)}else{F=q(F);var E=F>0?t.pos:F<0?t.neg:t.zero,C=E.replace("%s",x.symbol).replace("%v",e(Math.abs(F),b(x.precision),x.thousand,x.decimal));if(C.length>w){w=C.length}return C}});return j(u,function(D,C){if(h(D)&&D.length<w){return y?D.replace(x.symbol,x.symbol+(new Array(w-D.length+1).join(" "))):(new Array(w-D.length+1).join(" "))+D}return D})};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=i}exports.accounting=i}else{if(typeof define==="function"&&define.amd){define([],function(){return i})}else{i.noConflict=(function(r){return function(){m.accounting=r;i.noConflict=p;return i}})(m.accounting);m.accounting=i}}}(this));