angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function a(c,b){if(!b){return undefined}if(angular.isFunction(c.$parent[b])){return c.$parent[b]}return function(d){return d[b]}}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:false,link:function(d,c,b){$(function(){if(!angular.isArray(d.model)){d.model=[]}var g=$("select",c);var j=b.typeaheadSource?b.typeaheadSource.split("."):null;var h=j?(j.length>1?d.$parent[j[0]][j[1]]:d.$parent[j[0]]):null;g.tagsinput(d.$parent[b.options||""]||{typeahead:{source:angular.isFunction(h)?h:null},itemValue:a(d,b.itemvalue),itemText:a(d,b.itemtext),confirmKeys:a(d,b.confirmkeys)?JSON.parse(b.confirmkeys):[13],tagClass:angular.isFunction(d.$parent[b.tagclass])?d.$parent[b.tagclass]:function(i){return b.tagclass}});for(var e=0;e<d.model.length;e++){g.tagsinput("add",d.model[e])}g.on("itemAdded",function(i){if(d.model.indexOf(i.item)===-1){d.model.push(i.item)}});g.on("itemRemoved",function(i){var k=d.model.indexOf(i.item);if(k!==-1){d.model.splice(k,1)}});var f=d.model.slice();d.$watch("model",function(){var k=d.model.filter(function(n){return f.indexOf(n)===-1}),m=f.filter(function(n){return d.model.indexOf(n)===-1}),l;f=d.model.slice();for(l=0;l<m.length;l++){g.tagsinput("remove",m[l])}g.tagsinput("refresh");for(l=0;l<k.length;l++){g.tagsinput("add",k[l])}},true)})}}}]);