angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function b(c,d){return d?angular.isFunction(c.$parent[d])?c.$parent[d]:function(e){return e[d]}:void 0}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:!1,link:function(a,e,f){$(function(){angular.isArray(a.model)||(a.model=[]);var c=$("select",e),d=f.typeaheadSource?f.typeaheadSource.split("."):null,j=d?d.length>1?a.$parent[d[0]][d[1]]:a.$parent[d[0]]:null;c.tagsinput(a.$parent[f.options||""]||{typeahead:{source:angular.isFunction(j)?j:null},itemValue:b(a,f.itemvalue),itemText:b(a,f.itemtext),confirmKeys:b(a,f.confirmkeys)?JSON.parse(f.confirmkeys):[13],tagClass:angular.isFunction(a.$parent[f.tagclass])?a.$parent[f.tagclass]:function(){return f.tagclass}});for(var k=0;k<a.model.length;k++){c.tagsinput("add",a.model[k])}c.on("itemAdded",function(g){-1===a.model.indexOf(g.item)&&a.model.push(g.item)}),c.on("itemRemoved",function(g){var h=a.model.indexOf(g.item);-1!==h&&a.model.splice(h,1)});var l=a.model.slice();a.$watch("model",function(){var g,h=a.model.filter(function(m){return -1===l.indexOf(m)}),i=l.filter(function(m){return -1===a.model.indexOf(m)});for(l=a.model.slice(),g=0;g<i.length;g++){c.tagsinput("remove",i[g])}for(c.tagsinput("refresh"),g=0;g<h.length;g++){c.tagsinput("add",h[g])}},!0)})}}}]);